# Comparing `tmp/pistar-2.4.0-py3-none-any.whl.zip` & `tmp/pistar-2.5.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,87 +1,87 @@
-Zip file size: 96673 bytes, number of entries: 85
--rw-r--r--  2.0 unx      428 b- defN 22-Aug-08 07:47 _pistar/__init__.py
--rw-r--r--  2.0 unx      166 b- defN 22-Aug-08 07:47 _pistar/__main__.py
--rw-r--r--  2.0 unx     1056 b- defN 22-Aug-08 07:47 _pistar/agent.py
--rw-r--r--  2.0 unx     3391 b- defN 22-Aug-08 07:47 _pistar/attachment.py
--rw-r--r--  2.0 unx     2807 b- defN 22-Aug-08 07:47 _pistar/caller.py
--rw-r--r--  2.0 unx     4576 b- defN 22-Aug-08 07:47 _pistar/collector.py
--rw-r--r--  2.0 unx      509 b- defN 22-Aug-08 07:47 _pistar/console.py
--rw-r--r--  2.0 unx     5221 b- defN 22-Aug-08 07:47 _pistar/filesystem.py
--rw-r--r--  2.0 unx     3190 b- defN 22-Aug-08 07:47 _pistar/ide.py
--rw-r--r--  2.0 unx     2048 b- defN 22-Aug-08 07:47 _pistar/logger.py
--rw-r--r--  2.0 unx    14136 b- defN 22-Aug-08 07:47 _pistar/main.py
--rw-r--r--  2.0 unx     5198 b- defN 22-Aug-08 07:47 _pistar/node.py
--rw-r--r--  2.0 unx     7885 b- defN 22-Aug-08 07:47 _pistar/parallel.py
--rw-r--r--  2.0 unx     1139 b- defN 22-Aug-08 07:47 _pistar/report.py
--rw-r--r--  2.0 unx     4733 b- defN 22-Aug-08 07:47 _pistar/result.py
--rw-r--r--  2.0 unx     4034 b- defN 22-Aug-08 07:47 _pistar/terminal.py
--rw-r--r--  2.0 unx     9182 b- defN 22-Aug-08 07:47 _pistar/config/__init__.py
--rw-r--r--  2.0 unx     1883 b- defN 22-Aug-08 07:47 _pistar/config/cmdline.py
--rw-r--r--  2.0 unx     2198 b- defN 22-Aug-08 07:47 _pistar/config/hookspec.py
--rw-r--r--  2.0 unx        0 b- defN 22-Aug-08 07:47 _pistar/pistar_pytest/__init__.py
--rw-r--r--  2.0 unx    10491 b- defN 22-Aug-08 07:47 _pistar/pistar_pytest/collector.py
--rw-r--r--  2.0 unx     2706 b- defN 22-Aug-08 07:47 _pistar/pistar_pytest/models.py
--rw-r--r--  2.0 unx      599 b- defN 22-Aug-08 07:47 _pistar/pistar_pytest/plugins.py
--rw-r--r--  2.0 unx     3660 b- defN 22-Aug-08 07:47 _pistar/pistar_pytest/reporter.py
--rw-r--r--  2.0 unx     3588 b- defN 22-Aug-08 07:47 _pistar/pistar_pytest/utils.py
--rw-r--r--  2.0 unx      823 b- defN 22-Aug-08 07:47 _pistar/utilities/__init__.py
--rw-r--r--  2.0 unx       61 b- defN 22-Aug-08 07:47 _pistar/utilities/action_word/__init__.py
--rw-r--r--  2.0 unx     9428 b- defN 22-Aug-08 07:47 _pistar/utilities/action_word/checker.py
--rw-r--r--  2.0 unx     5686 b- defN 22-Aug-08 07:47 _pistar/utilities/action_word/decorator.py
--rw-r--r--  2.0 unx       67 b- defN 22-Aug-08 07:47 _pistar/utilities/argument_parser/__init__.py
--rw-r--r--  2.0 unx     1736 b- defN 22-Aug-08 07:47 _pistar/utilities/argument_parser/argument_parser.py
--rw-r--r--  2.0 unx       60 b- defN 22-Aug-08 07:47 _pistar/utilities/assertion/__init__.py
--rw-r--r--  2.0 unx    31648 b- defN 22-Aug-08 07:47 _pistar/utilities/assertion/assert_that.py
--rw-r--r--  2.0 unx        1 b- defN 22-Aug-08 07:47 _pistar/utilities/auto_generate/__init__.py
--rw-r--r--  2.0 unx     4108 b- defN 22-Aug-08 07:47 _pistar/utilities/auto_generate/aw_code_generate_service.py
--rw-r--r--  2.0 unx      579 b- defN 22-Aug-08 07:47 _pistar/utilities/auto_generate/generate.py
--rw-r--r--  2.0 unx     3418 b- defN 22-Aug-08 07:47 _pistar/utilities/auto_generate/generate_interface_test_service.py
--rw-r--r--  2.0 unx    12325 b- defN 22-Aug-08 07:47 _pistar/utilities/auto_generate/testcase_generate_service.py
--rw-------  2.0 unx     5149 b- defN 22-Aug-08 07:47 _pistar/utilities/auto_generate/template/interface/aw.py.txt
--rw-------  2.0 unx      939 b- defN 22-Aug-08 07:47 _pistar/utilities/auto_generate/template/interface/config_util.py.txt
--rw-------  2.0 unx     3363 b- defN 22-Aug-08 07:47 _pistar/utilities/auto_generate/template/interface/testcase.py.txt
--rw-r--r--  2.0 unx        1 b- defN 22-Aug-08 07:47 _pistar/utilities/condition/__init__.py
--rw-r--r--  2.0 unx     9337 b- defN 22-Aug-08 07:47 _pistar/utilities/condition/condition.py
--rw-r--r--  2.0 unx       53 b- defN 22-Aug-08 07:47 _pistar/utilities/constants/__init__.py
--rw-r--r--  2.0 unx      765 b- defN 22-Aug-08 07:47 _pistar/utilities/constants/action_word.py
--rw-r--r--  2.0 unx      242 b- defN 22-Aug-08 07:47 _pistar/utilities/constants/encode.py
--rw-r--r--  2.0 unx      230 b- defN 22-Aug-08 07:47 _pistar/utilities/constants/file_mode.py
--rw-r--r--  2.0 unx      173 b- defN 22-Aug-08 07:47 _pistar/utilities/constants/generate.py
--rw-r--r--  2.0 unx     3127 b- defN 22-Aug-08 07:47 _pistar/utilities/constants/pistar_logging.py
--rw-r--r--  2.0 unx     1527 b- defN 22-Aug-08 07:47 _pistar/utilities/constants/testcase.py
--rw-r--r--  2.0 unx      611 b- defN 22-Aug-08 07:47 _pistar/utilities/constants/yaml_type.py
--rw-r--r--  2.0 unx       55 b- defN 22-Aug-08 07:47 _pistar/utilities/exceptions/__init__.py
--rw-r--r--  2.0 unx     3547 b- defN 22-Aug-08 07:47 _pistar/utilities/exceptions/action_word.py
--rw-r--r--  2.0 unx    13395 b- defN 22-Aug-08 07:47 _pistar/utilities/exceptions/assertion.py
--rw-r--r--  2.0 unx     4683 b- defN 22-Aug-08 07:47 _pistar/utilities/exceptions/testcase.py
--rw-r--r--  2.0 unx       60 b- defN 22-Aug-08 07:47 _pistar/utilities/function_tools/__init__.py
--rw-r--r--  2.0 unx      400 b- defN 22-Aug-08 07:47 _pistar/utilities/function_tools/get_and_text.py
--rw-r--r--  2.0 unx      396 b- defN 22-Aug-08 07:47 _pistar/utilities/function_tools/get_or_text.py
--rw-r--r--  2.0 unx      305 b- defN 22-Aug-08 07:47 _pistar/utilities/function_tools/parse_util.py
--rw-r--r--  2.0 unx      265 b- defN 22-Aug-08 07:47 _pistar/utilities/function_tools/time_util.py
--rw-r--r--  2.0 unx      550 b- defN 22-Aug-08 07:47 _pistar/utilities/function_tools/update_dict_recurve.py
--rw-r--r--  2.0 unx       60 b- defN 22-Aug-08 07:47 _pistar/utilities/logger/__init__.py
--rw-r--r--  2.0 unx     2638 b- defN 22-Aug-08 07:47 _pistar/utilities/logger/logger.py
--rw-r--r--  2.0 unx      108 b- defN 22-Aug-08 07:47 _pistar/utilities/match_schema/__init__.py
--rw-r--r--  2.0 unx     7057 b- defN 22-Aug-08 07:47 _pistar/utilities/match_schema/match_schema.py
--rw-r--r--  2.0 unx      813 b- defN 22-Aug-08 07:47 _pistar/utilities/messages/__init__.py
--rw-r--r--  2.0 unx      161 b- defN 22-Aug-08 07:47 _pistar/utilities/parameters/__init__.py
--rw-r--r--  2.0 unx     8714 b- defN 22-Aug-08 07:47 _pistar/utilities/parameters/parameters.py
--rw-r--r--  2.0 unx       87 b- defN 22-Aug-08 07:47 _pistar/utilities/report/__init__.py
--rw-r--r--  2.0 unx     6743 b- defN 22-Aug-08 07:47 _pistar/utilities/report/pistar_report_info.py
--rw-r--r--  2.0 unx     2322 b- defN 22-Aug-08 07:47 _pistar/utilities/report/report_factory.py
--rw-r--r--  2.0 unx       84 b- defN 22-Aug-08 07:47 _pistar/utilities/testcase/__init__.py
--rw-r--r--  2.0 unx     2043 b- defN 22-Aug-08 07:47 _pistar/utilities/testcase/assert_that.py
--rw-r--r--  2.0 unx    21990 b- defN 22-Aug-08 07:47 _pistar/utilities/testcase/case.py
--rw-r--r--  2.0 unx    17312 b- defN 22-Aug-08 07:47 _pistar/utilities/testcase/exception.py
--rw-r--r--  2.0 unx     2186 b- defN 22-Aug-08 07:47 _pistar/utilities/testcase/repr.py
--rw-r--r--  2.0 unx    14499 b- defN 22-Aug-08 07:47 _pistar/utilities/testcase/steps.py
--rw-r--r--  2.0 unx     1611 b- defN 22-Aug-08 07:47 _pistar/utilities/testcase/thread_status.py
--rw-r--r--  2.0 unx      683 b- defN 22-Aug-08 07:47 pistar/__init__.py
--rw-------  2.0 unx     1105 b- defN 22-Aug-08 07:48 pistar-2.4.0.dist-info/LICENSE
--rw-r--r--  2.0 unx     3908 b- defN 22-Aug-08 07:48 pistar-2.4.0.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 22-Aug-08 07:48 pistar-2.4.0.dist-info/WHEEL
--rw-r--r--  2.0 unx      106 b- defN 22-Aug-08 07:48 pistar-2.4.0.dist-info/entry_points.txt
--rw-r--r--  2.0 unx       15 b- defN 22-Aug-08 07:48 pistar-2.4.0.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     7822 b- defN 22-Aug-08 07:48 pistar-2.4.0.dist-info/RECORD
-85 files, 316096 bytes uncompressed, 84039 bytes compressed:  73.4%
+Zip file size: 97242 bytes, number of entries: 85
+-rw-r--r--  2.0 unx      428 b- defN 23-Jul-27 09:03 _pistar/__init__.py
+-rw-r--r--  2.0 unx      172 b- defN 23-Jul-27 09:03 _pistar/__main__.py
+-rw-r--r--  2.0 unx     1056 b- defN 23-Jul-27 09:03 _pistar/agent.py
+-rw-r--r--  2.0 unx     3391 b- defN 23-Jul-27 09:03 _pistar/attachment.py
+-rw-r--r--  2.0 unx     2807 b- defN 23-Jul-27 09:03 _pistar/caller.py
+-rw-r--r--  2.0 unx     4576 b- defN 23-Jul-27 09:03 _pistar/collector.py
+-rw-r--r--  2.0 unx      509 b- defN 23-Jul-27 09:03 _pistar/console.py
+-rw-r--r--  2.0 unx     5221 b- defN 23-Jul-27 09:03 _pistar/filesystem.py
+-rw-r--r--  2.0 unx     3190 b- defN 23-Jul-27 09:03 _pistar/ide.py
+-rw-r--r--  2.0 unx     2264 b- defN 23-Jul-27 09:03 _pistar/logger.py
+-rw-r--r--  2.0 unx    14632 b- defN 23-Jul-27 09:03 _pistar/main.py
+-rw-r--r--  2.0 unx     5198 b- defN 23-Jul-27 09:03 _pistar/node.py
+-rw-r--r--  2.0 unx     7867 b- defN 23-Jul-27 09:03 _pistar/parallel.py
+-rw-r--r--  2.0 unx     1637 b- defN 23-Jul-27 09:03 _pistar/report.py
+-rw-r--r--  2.0 unx     5032 b- defN 23-Jul-27 09:03 _pistar/result.py
+-rw-r--r--  2.0 unx     4034 b- defN 23-Jul-27 09:03 _pistar/terminal.py
+-rw-r--r--  2.0 unx     9318 b- defN 23-Jul-27 09:03 _pistar/config/__init__.py
+-rw-r--r--  2.0 unx     1883 b- defN 23-Jul-27 09:03 _pistar/config/cmdline.py
+-rw-r--r--  2.0 unx     2409 b- defN 23-Jul-27 09:03 _pistar/config/hookspec.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Jul-27 09:03 _pistar/pistar_pytest/__init__.py
+-rw-r--r--  2.0 unx    11048 b- defN 23-Jul-27 09:03 _pistar/pistar_pytest/collector.py
+-rw-r--r--  2.0 unx     2706 b- defN 23-Jul-27 09:03 _pistar/pistar_pytest/models.py
+-rw-r--r--  2.0 unx      599 b- defN 23-Jul-27 09:03 _pistar/pistar_pytest/plugins.py
+-rw-r--r--  2.0 unx     4247 b- defN 23-Jul-27 09:03 _pistar/pistar_pytest/reporter.py
+-rw-r--r--  2.0 unx     3588 b- defN 23-Jul-27 09:03 _pistar/pistar_pytest/utils.py
+-rw-r--r--  2.0 unx      823 b- defN 23-Jul-27 09:03 _pistar/utilities/__init__.py
+-rw-r--r--  2.0 unx       61 b- defN 23-Jul-27 09:03 _pistar/utilities/action_word/__init__.py
+-rw-r--r--  2.0 unx     9428 b- defN 23-Jul-27 09:03 _pistar/utilities/action_word/checker.py
+-rw-r--r--  2.0 unx     5686 b- defN 23-Jul-27 09:03 _pistar/utilities/action_word/decorator.py
+-rw-r--r--  2.0 unx       67 b- defN 23-Jul-27 09:03 _pistar/utilities/argument_parser/__init__.py
+-rw-r--r--  2.0 unx     1736 b- defN 23-Jul-27 09:03 _pistar/utilities/argument_parser/argument_parser.py
+-rw-r--r--  2.0 unx       60 b- defN 23-Jul-27 09:03 _pistar/utilities/assertion/__init__.py
+-rw-r--r--  2.0 unx    31648 b- defN 23-Jul-27 09:03 _pistar/utilities/assertion/assert_that.py
+-rw-r--r--  2.0 unx        1 b- defN 23-Jul-27 09:03 _pistar/utilities/auto_generate/__init__.py
+-rw-r--r--  2.0 unx     4108 b- defN 23-Jul-27 09:03 _pistar/utilities/auto_generate/aw_code_generate_service.py
+-rw-r--r--  2.0 unx      579 b- defN 23-Jul-27 09:03 _pistar/utilities/auto_generate/generate.py
+-rw-r--r--  2.0 unx     3418 b- defN 23-Jul-27 09:03 _pistar/utilities/auto_generate/generate_interface_test_service.py
+-rw-r--r--  2.0 unx    12325 b- defN 23-Jul-27 09:03 _pistar/utilities/auto_generate/testcase_generate_service.py
+-rw-------  2.0 unx     5149 b- defN 23-Jul-27 09:03 _pistar/utilities/auto_generate/template/interface/aw.py.txt
+-rw-------  2.0 unx      939 b- defN 23-Jul-27 09:03 _pistar/utilities/auto_generate/template/interface/config_util.py.txt
+-rw-------  2.0 unx     3363 b- defN 23-Jul-27 09:03 _pistar/utilities/auto_generate/template/interface/testcase.py.txt
+-rw-r--r--  2.0 unx        1 b- defN 23-Jul-27 09:03 _pistar/utilities/condition/__init__.py
+-rw-r--r--  2.0 unx     9337 b- defN 23-Jul-27 09:03 _pistar/utilities/condition/condition.py
+-rw-r--r--  2.0 unx       53 b- defN 23-Jul-27 09:03 _pistar/utilities/constants/__init__.py
+-rw-r--r--  2.0 unx      765 b- defN 23-Jul-27 09:03 _pistar/utilities/constants/action_word.py
+-rw-r--r--  2.0 unx      242 b- defN 23-Jul-27 09:03 _pistar/utilities/constants/encode.py
+-rw-r--r--  2.0 unx      230 b- defN 23-Jul-27 09:03 _pistar/utilities/constants/file_mode.py
+-rw-r--r--  2.0 unx      173 b- defN 23-Jul-27 09:03 _pistar/utilities/constants/generate.py
+-rw-r--r--  2.0 unx     3127 b- defN 23-Jul-27 09:03 _pistar/utilities/constants/pistar_logging.py
+-rw-r--r--  2.0 unx     1527 b- defN 23-Jul-27 09:03 _pistar/utilities/constants/testcase.py
+-rw-r--r--  2.0 unx      611 b- defN 23-Jul-27 09:03 _pistar/utilities/constants/yaml_type.py
+-rw-r--r--  2.0 unx       55 b- defN 23-Jul-27 09:03 _pistar/utilities/exceptions/__init__.py
+-rw-r--r--  2.0 unx     3547 b- defN 23-Jul-27 09:03 _pistar/utilities/exceptions/action_word.py
+-rw-r--r--  2.0 unx    13395 b- defN 23-Jul-27 09:03 _pistar/utilities/exceptions/assertion.py
+-rw-r--r--  2.0 unx     4683 b- defN 23-Jul-27 09:03 _pistar/utilities/exceptions/testcase.py
+-rw-r--r--  2.0 unx       60 b- defN 23-Jul-27 09:03 _pistar/utilities/function_tools/__init__.py
+-rw-r--r--  2.0 unx      400 b- defN 23-Jul-27 09:03 _pistar/utilities/function_tools/get_and_text.py
+-rw-r--r--  2.0 unx      396 b- defN 23-Jul-27 09:03 _pistar/utilities/function_tools/get_or_text.py
+-rw-r--r--  2.0 unx      305 b- defN 23-Jul-27 09:03 _pistar/utilities/function_tools/parse_util.py
+-rw-r--r--  2.0 unx      265 b- defN 23-Jul-27 09:03 _pistar/utilities/function_tools/time_util.py
+-rw-r--r--  2.0 unx      550 b- defN 23-Jul-27 09:03 _pistar/utilities/function_tools/update_dict_recurve.py
+-rw-r--r--  2.0 unx       60 b- defN 23-Jul-27 09:03 _pistar/utilities/logger/__init__.py
+-rw-r--r--  2.0 unx     2638 b- defN 23-Jul-27 09:03 _pistar/utilities/logger/logger.py
+-rw-r--r--  2.0 unx      108 b- defN 23-Jul-27 09:03 _pistar/utilities/match_schema/__init__.py
+-rw-r--r--  2.0 unx     7057 b- defN 23-Jul-27 09:03 _pistar/utilities/match_schema/match_schema.py
+-rw-r--r--  2.0 unx      813 b- defN 23-Jul-27 09:03 _pistar/utilities/messages/__init__.py
+-rw-r--r--  2.0 unx      161 b- defN 23-Jul-27 09:03 _pistar/utilities/parameters/__init__.py
+-rw-r--r--  2.0 unx     8714 b- defN 23-Jul-27 09:03 _pistar/utilities/parameters/parameters.py
+-rw-r--r--  2.0 unx       87 b- defN 23-Jul-27 09:03 _pistar/utilities/report/__init__.py
+-rw-r--r--  2.0 unx     6762 b- defN 23-Jul-27 09:03 _pistar/utilities/report/pistar_report_info.py
+-rw-r--r--  2.0 unx     1281 b- defN 23-Jul-27 09:03 _pistar/utilities/report/report_factory.py
+-rw-r--r--  2.0 unx       84 b- defN 23-Jul-27 09:03 _pistar/utilities/testcase/__init__.py
+-rw-r--r--  2.0 unx     2043 b- defN 23-Jul-27 09:03 _pistar/utilities/testcase/assert_that.py
+-rw-r--r--  2.0 unx    22527 b- defN 23-Jul-27 09:03 _pistar/utilities/testcase/case.py
+-rw-r--r--  2.0 unx    17312 b- defN 23-Jul-27 09:03 _pistar/utilities/testcase/exception.py
+-rw-r--r--  2.0 unx     2186 b- defN 23-Jul-27 09:03 _pistar/utilities/testcase/repr.py
+-rw-r--r--  2.0 unx    14499 b- defN 23-Jul-27 09:03 _pistar/utilities/testcase/steps.py
+-rw-r--r--  2.0 unx     1611 b- defN 23-Jul-27 09:03 _pistar/utilities/testcase/thread_status.py
+-rw-r--r--  2.0 unx      683 b- defN 23-Jul-27 09:03 pistar/__init__.py
+-rw-------  2.0 unx     1105 b- defN 23-Jul-27 09:04 pistar-2.5.0.dist-info/LICENSE
+-rw-r--r--  2.0 unx     3921 b- defN 23-Jul-27 09:04 pistar-2.5.0.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jul-27 09:04 pistar-2.5.0.dist-info/WHEEL
+-rw-r--r--  2.0 unx      105 b- defN 23-Jul-27 09:04 pistar-2.5.0.dist-info/entry_points.txt
+-rw-r--r--  2.0 unx       15 b- defN 23-Jul-27 09:04 pistar-2.5.0.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     7822 b- defN 23-Jul-27 09:05 pistar-2.5.0.dist-info/RECORD
+85 files, 318611 bytes uncompressed, 84608 bytes compressed:  73.4%
```

## zipnote {}

```diff
@@ -231,26 +231,26 @@
 
 Filename: _pistar/utilities/testcase/thread_status.py
 Comment: 
 
 Filename: pistar/__init__.py
 Comment: 
 
-Filename: pistar-2.4.0.dist-info/LICENSE
+Filename: pistar-2.5.0.dist-info/LICENSE
 Comment: 
 
-Filename: pistar-2.4.0.dist-info/METADATA
+Filename: pistar-2.5.0.dist-info/METADATA
 Comment: 
 
-Filename: pistar-2.4.0.dist-info/WHEEL
+Filename: pistar-2.5.0.dist-info/WHEEL
 Comment: 
 
-Filename: pistar-2.4.0.dist-info/entry_points.txt
+Filename: pistar-2.5.0.dist-info/entry_points.txt
 Comment: 
 
-Filename: pistar-2.4.0.dist-info/top_level.txt
+Filename: pistar-2.5.0.dist-info/top_level.txt
 Comment: 
 
-Filename: pistar-2.4.0.dist-info/RECORD
+Filename: pistar-2.5.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## _pistar/__main__.py

```diff
@@ -1,7 +1,7 @@
 """
 this module is the entrance of the pistar factory edition.
 """
 from _pistar.config import console_main
 
 if __name__ == '__main__':
-    SystemExit(console_main())
+    raise SystemExit(console_main())
```

## _pistar/logger.py

```diff
@@ -13,14 +13,21 @@
 
 
 def set_execution_log(case: "TestCase", msg):
     case.clazz.info(msg)
 
 
 @hookimpl(hookwrapper=True)
+def pistar_make_init_report(case: "TestCase", call_info: ExecuteInfo):
+    result: Result = (yield).get_result()
+    if result.failed:
+        case.clazz.error(result.longrepr)
+
+
+@hookimpl(hookwrapper=True)
 def pistar_make_report(case: "TestCase", call_info: ExecuteInfo, step: Optional[Step]):
     result: "Result" = (yield).get_result()
     if result.passed and isinstance(result.exception, PassedException):
         case.clazz.info(str(result.exception))
     elif result.longrepr and result.failed:
         case.clazz.error(result.longrepr)
     status = "passed" if result.passed else "failed"
@@ -44,15 +51,15 @@
 @hookimpl(tryfirst=True)
 def pistar_run_setup(step: Step):
     set_execution_log(step.parent, msg=f"step {step.name} start.")
 
 
 @hookimpl(tryfirst=True)
 def pistar_run_teardown(step: Step):
-    set_execution_log(step.parent, msg=f"step {step.name} end.")
+    set_execution_log(step.parent, msg=f"step {step.name} start.")
 
 
 def log_for_exceptions(
         case: "TestCase",
         pure_traceback_exception: Dict[str, str]
 ) -> None:
     case.clazz.error(f'{pure_traceback_exception["detail"]}')
```

## _pistar/main.py

```diff
@@ -5,15 +5,15 @@
 from pathlib import Path
 from typing import Optional, Union, List, Set, Sequence, Iterator, Dict
 
 import yaml
 
 from _pistar.agent import generate_finish_file, generate_start_file
 from _pistar.caller import ExecuteInfo, CollectReport
-from _pistar.config import Config
+from _pistar.config import Config, ExitCode
 from _pistar.config.cmdline import hookimpl
 from _pistar.filesystem import (
     visit,
     resolve_package_path,
     import_from_path,
     ensure_remove_module,
 )
@@ -27,18 +27,20 @@
 from _pistar.terminal import console_testcase_start
 from _pistar.utilities.condition.condition import ConditionManager, ConditionDef
 from _pistar.utilities.constants.testcase import (
     PISTAR_TESTCASE_EXECUTION_STATUS as PISTAR_STATUS,
     TESTCASE_EXECUTION_STATUS as EXECUTION_STATUS
 )
 from _pistar.utilities.exceptions.testcase import UsageError
-from _pistar.utilities.report.report_factory import get_report_info, generate_report_and_finish_file
+from _pistar.utilities.report.pistar_report_info import update_last_step_condition
+from _pistar.utilities.report.report_factory import generate_status_and_finish_file
 from _pistar.utilities.testcase.case import TestCase
 from _pistar.utilities.testcase.case import get_result_path
 from _pistar.utilities.testcase.exception import format_timeout_exception
+from _pistar.utilities.testcase.exception import ExceptionInfo
 from _pistar.logger import set_execution_log, log_for_exceptions
 
 
 class TESTCASE_TYPE:
     PISTAR = "pistar"
     PYTEST = "pytest"
 
@@ -282,45 +284,43 @@
 
 @hookimpl
 def pistar_main(config: Config):
     """
     description: the function is the entry of running testcases
     """
     if config.arguments.type == TESTCASE_TYPE.PYTEST:
-        execute_pytest_testcases(config.arguments)
-        return
+        return execute_pytest_testcases(config.arguments)
 
     start_time = now()
     session = Session.from_config(config)
     hook = config.hook
     hook.pistar_session_start(session=session)
     hook.pistar_collection(session=session)
     hook.pistar_run_loop(session=session)
     console_summary_collection(
         session.all_case_results, now() - start_time, config.no_color
     )
     hook.pistar_session_finish(session=session)
-
+    return ExitCode.OK
 
 @hookimpl
 def pistar_collection(session: Session) -> None:
     session.do_collect()
 
 
 @hookimpl
 def pistar_run_loop(session: Session):
     if session.config.collectonly:
         return
     hook = session.config.hook
     for i, case in enumerate(session.cases):
         next_case = session.cases[i + 1] if i + 1 < len(session.cases) else None
         hook.pistar_run_procedure(case=case, next_case=next_case)
-        report_info = get_report_info(case)
         session.all_case_results.update(
-            generate_report_and_finish_file(case, report_info)
+            generate_status_and_finish_file(case=case)
         )
 
 
 @hookimpl(trylast=True)
 def pistar_modify_case(case):
     """
     priority determination of command-line parameters and parameter settings in use cases:
@@ -382,45 +382,55 @@
         msg = f"file or directory not found: {abspath}"
         raise UsageError(msg)
 
     return abspath
 
 
 def call_procedure(case: TestCase, next_case: Optional[TestCase]):
-    try:
-        case.initialize_step()
-    except BaseException as exception:
-        case.exception = TestCase.format_exception_by_pure_traceback(
-            case.clazz.__init__
-        )
-        log_for_exceptions(case, case.exception)
+    ihook = case.config.hook.pistar_case_init
+    call_info = ExecuteInfo.from_call(lambda: ihook(case=case), when="init")
+    report = case.config.hook.pistar_make_init_report(case=case, call_info=call_info)
+    if report.failed:
+        return
+    set_execution_log(case, msg=f"case {case.name} start.")
+    if case.timeout:
+        eventlet.monkey_patch(socket=False)
+        with eventlet.Timeout(case.timeout, exception=TimeoutError):
+            try:
+                case.execute()
+            except TimeoutError:
+                case.is_timeout = True
+                case.execution_status = EXECUTION_STATUS.FAILED
+                case.exception = format_timeout_exception(case.timeout)
+                log_for_exceptions(case, case.exception)
     else:
-        set_execution_log(case, msg=f"case {case.name} start.")
-        if case.timeout:
-            eventlet.monkey_patch(socket=False)
-            with eventlet.Timeout(case.timeout, exception=TimeoutError):
-                try:
-                    case.execute()
-                except TimeoutError:
-                    case.is_timeout = True
-                    case.execution_status = EXECUTION_STATUS.FAILED
-                    case.exception = format_timeout_exception(case.timeout)
-                    log_for_exceptions(case, case.exception)
-        else:
-            case.execute()
-        if next_case is None:
-            execute_post_condition(case)
+        case.execute()
+    if next_case is None:
+        execute_post_condition(case)
+
+
+@hookimpl
+def pistar_case_init(case: TestCase):
+    case.initialize_step()
+
+
+def post_trace_result_exc(case, finish_condition):
+    for result in finish_condition:
+        for condition_name, condition_result in result.items():
+            if isinstance(condition_result[0], Exception):
+                exc_info = ExceptionInfo.from_exc_info(condition_result[0])
+                case.instance.error(condition_result[0])
 
 
 def execute_post_condition(case: TestCase):
     finish_condition = case.condition_manager.finish()
+    post_trace_result_exc(case, finish_condition)
     steps = list(case.execute_records.keys())
     if steps:
-        last_step = steps[-1]
-        case.execute_records.get(last_step)["after"] = finish_condition
+        update_last_step_condition(case, finish_condition)
 
 
 def pi_environment():
     workspace = Path(os.getcwd())
     env_path = workspace.joinpath("environment.yaml")
     if not env_path.is_file():
         raise IOError("Cannot find the file environment.yaml")
@@ -446,7 +456,8 @@
     command = [sys.executable, "-m", "pytest", "-v"]
     command += ["--pistar_dir=" + arguments.output]
     command += pytest_file_list
 
     process = subprocess.Popen(command)
 
     process.communicate(timeout=TIMEOUT)
+    return process.returncode
```

## _pistar/parallel.py

```diff
@@ -3,15 +3,16 @@
 from typing import Set, List
 
 import dill
 from _pistar.config.cmdline import hookimpl
 from _pistar.config import Config
 from _pistar import is_teststep
 from _pistar.utilities.argument_parser.argument_parser import ArgumentTypeError
-from _pistar.main import Session, get_report_info, generate_report_and_finish_file
+from _pistar.main import Session
+from _pistar.utilities.report.report_factory import generate_status_and_finish_file
 from _pistar.utilities.testcase.case import TestCase
 
 timeout = 2  # Queue operation timeout, unit: seconds
 
 
 def parallel_option_type(_string):
     _string = _string.strip()
@@ -200,9 +201,8 @@
             pull_queue_testcase()
         if case is process_cases[-1]:
             next_case = None
         else:
             next_case = process_cases[process_cases.index(case) + 1]
         hook = case.session.config.hook
         hook.pistar_run_procedure(case=case, next_case=next_case)
-        report_info = get_report_info(case)
-        result_queue.put(generate_report_and_finish_file(case, report_info))
+        result_queue.put(generate_status_and_finish_file(case=case))
```

## _pistar/report.py

```diff
@@ -1,16 +1,18 @@
-from typing import Optional
-
+import os
 from _pistar.caller import ExecuteInfo
 from _pistar.config.cmdline import hookimpl
 from _pistar.result import Result
 from _pistar.utilities.exceptions.testcase import PassedException
+from _pistar.utilities.report.report_factory import generate_status_and_finish_file
 from _pistar.utilities.testcase.case import TestCase
 from _pistar.utilities.testcase.steps import Step
 from _pistar.utilities.constants.testcase import TESTCASE_EXECUTION_STATUS
+from _pistar.utilities.report.pistar_report_info import write_report
+from _pistar.utilities.report.pistar_report_info import get_step_report_info
 
 
 @hookimpl(hookwrapper=True)
 def pistar_make_report(case: TestCase, call_info: ExecuteInfo, step: Step):
     result: Result = (yield).get_result()
     status_code = TESTCASE_EXECUTION_STATUS.PASSED if result.passed else \
         TESTCASE_EXECUTION_STATUS.FAILED
@@ -23,7 +25,12 @@
     case.execute_records[step.name] = {
         "before": step.condition_result_cache,
         "start_time": call_info.begin,
         "end_time": call_info.end,
         "status_code": status_code,
         "exception": exception
     }
+    step_info = get_step_report_info(case, step.name)
+    report_path_dir = case.clazz.testcase_result_path
+    report_json_file = ".".join([step.name + "-result", "json"])
+    report_path = os.path.join(report_path_dir, report_json_file)
+    write_report(report_path, step_info)
```

## _pistar/result.py

```diff
@@ -113,14 +113,23 @@
 
     @property
     def failed(self):
         return self.status != STATUS.PASSED
 
 
 @hookimpl
+def pistar_make_init_report(case: TestCase, call_info: ExecuteInfo) -> Result:
+    result = Result.from_call_and_step(case=case, call=call_info)
+    case.execution_status = result.status
+    if result.failed:
+        case.exception['detail'] = result.longrepr
+    return result
+
+
+@hookimpl
 def pistar_make_report(case: TestCase, call_info: ExecuteInfo, step: Optional[Step]) \
         -> Result:
     """
     this function is used to return a result of the executed step.
     """
     result = Result.from_call_and_step(case=case, call=call_info, step=step)
     if result.failed:
```

## _pistar/config/__init__.py

```diff
@@ -43,15 +43,17 @@
 
 class ExitCode(enum.IntEnum):
     """Exit Code for PiStar."""
 
     #: run successfully.
     OK = 0
     #: misused.
+    CASEFAIL = 1
     USAGE_ERROR = 4
+    NO_CASE = 5
 
 
 class PiStarPluginManager(PluginManager):
     """
     the pistarpluginmanager is used to manage registration of plugin
     and offer the function to register and call the hook.
     """
@@ -240,20 +242,22 @@
         return ExitCode.USAGE_ERROR
 
     if config.version:
         print("pistar", VERSION)
 
     elif config.subcommand == COMMANDS.EXECUTE:
         try:
-            config.hook.pistar_main(config=config)
+            ret = config.hook.pistar_main(config=config)
         except UsageError as e:
             for msg in e.args:
                 print(f"ERROR: {msg}")
 
             return ExitCode.USAGE_ERROR
+        if ret not in [ExitCode.OK, ExitCode.CASEFAIL, ExitCode.NO_CASE]:
+            return ret
 
     elif config.subcommand == COMMANDS.GENERATE:
         generate_file(config.arguments)
     else:
         config.parser.print_help()
     return ExitCode.OK
 
@@ -262,15 +266,15 @@
     """
     The CLI entry point for pistar.
 
     """
     return main()
 
 
-VERSION = "2.4.0"
+VERSION = "2.5.0"
 
 
 def init_root_path(args: Sequence[str]) -> Path:
     dirs = get_dir_from_path(args)
     dirs.append(Path().cwd().absolute())
     ancestor = get_ancestor(dirs)
```

## _pistar/config/hookspec.py

```diff
@@ -28,15 +28,15 @@
 def pistar_config(config: "Config"):
     """
     the function is used to get the pluginmanager from config, and register the plugin's hook.
     """
     ...
 
 
-@hookspec
+@hookspec(firstresult=True)
 def pistar_main(config: "Config"):
     """
     the function is the entry of the execution.
     """
     ...
 
 
@@ -90,21 +90,31 @@
 
 
 @hookspec
 def pistar_session_finish(session: "Session"):
     ...
 
 
+@hookspec
+def pistar_case_init(case: "TestCase"):
+    ...
+
+
 @hookspec(firstresult=True)
 def pistar_condition_setup(condition_def: "ConditionDef", caller: "Step"):
     ...
 
 
 @hookspec(firstresult=True)
 def pistar_step_call(step: "Step"):
     ...
 
 
 @hookspec(firstresult=True)
+def pistar_make_init_report(case: "TestCase", call_info: "ExecuteInfo") -> "Result":
+    ...
+
+
+@hookspec(firstresult=True)
 def pistar_make_report(case: "TestCase", step: "Step", call_info: "ExecuteInfo") -> \
         "Result":
     ...
```

## _pistar/pistar_pytest/collector.py

```diff
@@ -22,18 +22,20 @@
 
 @attrs
 class Finish:
     start_time = attrib(default=None)
     end_time = attrib(default=None)
     duration = attrib(default=None)
     result = attrib(default=None)
+    log_path = attrib(default=None)
 
-    def finish(self):
+    def finish(self, log_path=None):
         self.end_time = now()
         self.duration = self.end_time - self.start_time
+        self.log_path = log_path
 
 
 class Cache:
     """
     A cache to covert an object to a uuid string.
 
     The items in cache can be a pytest node id,or a fixturedef object.
@@ -105,37 +107,42 @@
 
         if report.when == "teardown":
             if status in (Status.FAILED, Status.BROKEN) and test_result.result == Status.PASSED.val:
                 test_result.result = status.val
                 test_result.add_exception(status_details)
 
             self._handle_attachment(report)
+        if status_details:
+            self._reporter.case_log_collected(f"{report.head_line} exception", status_details.detail)
 
     def _handle_attachment(self, report):
         if report.caplog:
-            self._attach_data(report.caplog, "log", AttachmentType.TEXT)
+            self._attach_data(report.caplog, f"{report.head_line} log", AttachmentType.TEXT)
+            self._reporter.case_log_collected("log", report.caplog)
         if report.capstdout:
             self._attach_data(report.capstdout, "stdout", AttachmentType.TEXT)
+            self._reporter.case_log_collected(f"{report.head_line} stdout", report.capstdout)
         if report.capstderr:
             self._attach_data(report.capstderr, "stderr", AttachmentType.TEXT)
+            self._reporter.case_log_collected(f"{report.head_line} stderr", report.capstderr)
 
     def _attach_data(self, body, name, attachment_type):
         self._reporter.attach_data(uuid4()[:intercept_character], body, name=name, attachment_type=attachment_type)
 
     @pytest.hookimpl(hookwrapper=True, tryfirst=True)
     def pytest_runtest_protocol(self, item, nextitem):
         uuid = self._cache.push(item.nodeid)
         self._cur_node_id = item.nodeid
         test_result = TestResult(name=item.name, uuid=uuid, start_time=now(), end_time=now())
         new_file_md5 = sha256_slice(item.fspath.strpath)
         if self._last_pytest_file is None:
             self._update_file_case_info(item, new_file_md5)
 
         elif self._last_pytest_file != item.fspath.strpath:
-            self._cur_file_case_info.finish()
+            self._cur_file_case_info.finish(str(self._reporter._case_log_path))
             self._reporter.set_file_finished(self._cur_file_case_info)
             self._update_file_case_info(item, new_file_md5)
         self._reporter.schedule_test(uuid, test_result)
         yield
 
     def _update_file_case_info(self, item, new_file_md5):
         self._reporter.update_file_output_path(new_file_md5)
@@ -202,15 +209,15 @@
         yield
         uuid = self._cache.pop(nodeid)
         self._reporter.close_test(uuid)
 
     def pytest_sessionfinish(self):
         # set last file case finished
         if self._cur_file_case_info:
-            self._cur_file_case_info.finish()
+            self._cur_file_case_info.finish(str(self._reporter._case_log_path))
             self._reporter.set_file_finished(self._cur_file_case_info)
 
     def hook_pytest_finalizer(self, fixturedef):
         """
         Hook pytest finalizer.
 
         Replace original finalizer by FinalizerWrapper to get statistic info,
```

## _pistar/pistar_pytest/reporter.py

```diff
@@ -1,39 +1,42 @@
 import io
 import json
 import os
 import shutil
 from collections import OrderedDict
 from pathlib import Path
+from typing import Optional
 
 from _pistar.pistar_pytest.models import ATTACHMENT_PATTERN
 from _pistar.pistar_pytest.models import Attachment
 from _pistar.pistar_pytest.utils import now, write_attr
 from _pistar.utilities.constants.encode import ENCODE
 from _pistar.utilities.constants.file_mode import FILE_MODE
 
 
 class Reporter:
     def __init__(self, report_dir):
         self._report_base = report_dir
         self._report_dir = report_dir
+        self._case_log_path: Optional[Path] = None
         self._items = OrderedDict()
         self._finished = list()
         # current case uuid
         self._cur_case = None
 
     def set_file_finished(self, finish):
         write_attr(finish, self._report_dir, "finished.json")
 
     def update_file_output_path(self, folder_md5):
         self._report_dir = os.path.join(self._report_base, folder_md5)
-
+        self._case_log_path = Path(os.path.join(self._report_dir, "log.log"))
         if os.path.exists(self._report_dir):
             shutil.rmtree(self._report_dir)
         os.makedirs(self._report_dir)
+        self._case_log_path.touch()
 
     def update_cur_file(self, cur_file):
         data = dict()
         data["cur_script"] = cur_file
         destination = os.path.join(self._report_base, "task_meta_info.json")
         with io.open(destination, mode=FILE_MODE.WRITE, encoding=ENCODE.UTF8) as json_file:
             json.dump(data, json_file, ensure_ascii=False)
@@ -101,7 +104,18 @@
 
         return file_name
 
     def report_attached_data(self, body, file_name):
         destination = Path(self._report_dir).joinpath(file_name)
         with destination.open(mode="wb") as f:
             f.write(body.encode("utf-8"))
+
+    def case_log_collected(self, sep_info, log_info):
+        sep_size = 120
+        sep_extend = "="
+        with self._case_log_path.open("ab") as f:
+            f.write(f" {sep_info} ".center(sep_size, sep_extend).encode("utf-8"))
+            f.write("\n".encode("utf-8"))
+            if log_info:
+                f.write(log_info.encode("utf-8"))
+            f.write("\n".encode("utf-8"))
+
```

## _pistar/utilities/report/pistar_report_info.py

```diff
@@ -1,36 +1,37 @@
 """
 description: this module provides report for each step.
 """
+import os
+import json
 import inspect
 from pathlib import Path
 from typing import Dict
 from typing import List
 
 from attr import asdict
 
 from _pistar.pistar_pytest.utils import uuid4
 from _pistar.utilities.condition.condition import ConditionManager
 from _pistar.utilities.constants.testcase import \
     PISTAR_TESTCASE_EXECUTION_STATUS as STATUS
 from _pistar.utilities.constants.testcase import STEP_TYPE
 from _pistar.utilities.testcase.case import TestCase
+from _pistar.utilities.constants.encode import ENCODE
+from _pistar.utilities.constants.file_mode import FILE_MODE
 
 
 def duration_amend(duration):
     if duration > 0:
         return duration
     else:
         return 1
 
 
-def _get_post_condition_info(con_manager: ConditionManager,
-                             step_info: Dict,
-                             step_record: Dict,
-                             nodeid: str) -> None:
+def _get_post_condition_info(step_info: Dict, step_record: Dict) -> None:
     step_info['after'] = list()
     for after in step_record.get('after', []):
         after_name = list(after.keys())[0]
         result, duration = after.get(after_name)
         step_info['after'].append({
             'name': after_name,
             'result': STATUS.PASSED
@@ -102,85 +103,86 @@
             step_info['actions'].append({
                 'name': action_caller.split('.')[-1],
                 'execute_times': execute_times,
                 'avg_duration': duration_amend(avg_duration)
             })
 
 
-class PistarReportInfo(dict):
-    """
-    description:new report class to create and save
-    """
-
-    def __init__(self, testcase: TestCase):
-        super().__init__()
-        if getattr(testcase, 'instance', None):
-            self._get_case_execution_info(testcase)
-        else:
-            self._get_case_unexecution_info()
-
-    def _get_case_unexecution_info(self):
-        self['details'] = list()
-
-    def _get_case_execution_info(
-            self,
-            testcase: TestCase):
-        reports = getattr(testcase.instance, 'reports', None)
-        self['details'] = list()
-        for teststep in testcase.execute_records:
-            step_record = testcase.execute_records.get(teststep)
-            step_info = dict()
-            if reports and teststep in reports:
-                step_info['report'] = reports.get(teststep)
-            step_info['name'] = teststep
-            step_info['start_time'] = step_record['start_time']
-            step_info['end_time'] = step_record['end_time']
-            duration = step_info['end_time'] - step_info['start_time']
-            step_info['duration'] = duration_amend(duration)
-
-            step_info['result'] = STATUS.PASSED if \
-                step_record.get('status_code') == '0' else STATUS.FAILED
-            description = getattr(getattr(testcase.instance, teststep, None), "description", teststep)
-            step_info['description'] = description if description else teststep
-            step_info['fullName'] = '::'.join(
-                [testcase.clazz.__name__, teststep])
-            step_info['uuid'] = uuid4()
-
-            step_info['testCaseId'] = inspect.getfile(
-                testcase.clazz
-            )
-            if teststep == 'setup':
-                step_info['step_type'] = STEP_TYPE.SETUP
-            elif teststep in ['teardown', 'failure']:
-                step_info['step_type'] = STEP_TYPE.TEARDOWN
-            else:
-                step_info['step_type'] = STEP_TYPE.TESTSTEP
-
-            rel_path = Path(testcase.path).relative_to(Path.cwd())
-            step_info['labels'] = [
-                {
-                    'name': 'parentSuite',
-                    'value': str(rel_path.parent)
-                },
-                {
-                    'name': 'suite',
-                    'value': rel_path.name
-                },
-                {
-                    'name': 'subSuite',
-                    'value': testcase.clazz.__name__
-                }
-            ]
-            nodeid = testcase.nodeid
-            _get_pre_condition_info(
-                testcase.condition_manager, step_info, step_record, nodeid)
-            _get_post_condition_info(
-                testcase.condition_manager, step_info, step_record, nodeid)
-            _get_attachments(step_info, teststep, testcase)
-            _get_actions(step_info, teststep, testcase)
-
-            exception = step_record.get('exception', None)
-            step_info['exception'] = list()
-            if exception:
-                step_info['exception'].append(exception)
+def step_info_assemble(testcase: TestCase, step_info: Dict, step_record: Dict, nodeid: str, teststep: str):
+    _get_pre_condition_info(
+        testcase.condition_manager, step_info, step_record, nodeid)
+    _get_post_condition_info(
+        step_info, step_record)
+    _get_attachments(step_info, teststep, testcase)
+    _get_actions(step_info, teststep, testcase)
+
+
+def write_report(report_path, step_info: Dict):
+    with open(report_path, mode=FILE_MODE.WRITE, encoding=ENCODE.UTF8) as file:
+        json.dump(step_info, file, ensure_ascii=False, default=str)
+
+
+def read_report(report_path):
+    with open(report_path, mode=FILE_MODE.READ, encoding=ENCODE.UTF8) as file:
+        return json.load(file)
+
+
+def get_step_report_info(testcase: TestCase, step_name: str):
+    reports = getattr(testcase.instance, 'reports', None)
+    step_record = testcase.execute_records.get(step_name)
+    step_info = dict()
+    if reports and step_name in reports:
+        step_info['report'] = reports.get(step_name)
+    step_info['name'] = step_name
+    step_info['start_time'] = step_record['start_time']
+    step_info['end_time'] = step_record['end_time']
+    duration = step_info['end_time'] - step_info['start_time']
+    step_info['duration'] = duration if duration > 0 else 1
+    step_info['result'] = STATUS.PASSED if \
+        step_record.get('status_code') == '0' else STATUS.FAILED
+    description = getattr(getattr(testcase.instance, step_name, None), "description", step_name)
+    step_info['description'] = description if description else step_name
+    step_info['fullName'] = '::'.join([testcase.clazz.__name__, step_name])
+    step_info['uuid'] = uuid4()
+    step_info['testCaseId'] = inspect.getfile(testcase.clazz)
+    if step_name == 'setup':
+        step_info['step_type'] = STEP_TYPE.SETUP
+    elif step_name in ['teardown', 'failure']:
+        step_info['step_type'] = STEP_TYPE.TEARDOWN
+    else:
+        step_info['step_type'] = STEP_TYPE.TESTSTEP
 
-            self['details'].append(step_info)
+    rel_path = Path(testcase.path).relative_to(Path.cwd())
+    step_info['labels'] = [
+        {
+            'name': 'parentSuite',
+            'value': str(rel_path.parent)
+        },
+        {
+            'name': 'suite',
+            'value': rel_path.name
+        },
+        {
+            'name': 'subSuite',
+            'value': testcase.clazz.__name__
+        }
+    ]
+    nodeid = testcase.nodeid
+    step_info_assemble(testcase, step_info, step_record, nodeid, step_name)
+    exception = step_record.get('exception', None)
+    step_info['exception'] = list()
+    if exception:
+        step_info['exception'].append(exception)
+    return step_info
+
+
+def update_last_step_condition(case: TestCase, finish_condition: List):
+    steps = list(case.execute_records.keys())
+    last_step = steps[-1]
+
+    report_path_dir = case.clazz.testcase_result_path
+    report_json_file = ".".join([last_step + "-result", "json"])
+    report_path = os.path.join(report_path_dir, report_json_file)
+
+    step_info = read_report(report_path)
+    _get_post_condition_info(step_info, {"after": finish_condition})
+    write_report(report_path, step_info)
```

## _pistar/utilities/report/report_factory.py

```diff
@@ -1,61 +1,31 @@
-import json
-import os
 from typing import Dict
-
 from _pistar.pistar_pytest.utils import now
-from _pistar.utilities.constants.encode import ENCODE
-from _pistar.utilities.constants.file_mode import FILE_MODE
 from _pistar.utilities.constants.testcase import PISTAR_TESTCASE_EXECUTION_STATUS as \
     PISTAR_STATUS
 from _pistar.utilities.testcase.case import TestCase
-from _pistar.utilities.report.pistar_report_info import PistarReportInfo
 from _pistar.agent import generate_finish_file
 
 
-def get_report_info(testcase: TestCase):
-    """
-    description: get report data by report_type
-    parameter:
-        report_type:
-            description: the report_type
-            type:str
-    return:
-        report
-    """
-    report_info = PistarReportInfo(testcase)
-
-    return report_info
-
-
-def generate_report_file(testcase, report_info):
-    output_path = testcase.clazz.testcase_result_path
-    for teststep in report_info.get("details"):
-        report_json_file = "".join([teststep.get("name", ""), "-result.json"])
-        with open(os.path.join(output_path, report_json_file), mode=FILE_MODE.WRITE, encoding=ENCODE.UTF8) as file:
-            json.dump(teststep, file, ensure_ascii=False, default=str)
-
-
-def generate_report_and_finish_file(case: TestCase, report_info: PistarReportInfo) -> Dict[str, int]:
-    if report_info["details"]:
+def generate_status_and_finish_file(case: TestCase) -> Dict[str, int]:
+    try:
         status = PISTAR_STATUS.PASSED if case.execution_status == "0" else PISTAR_STATUS.FAILED
         start_time = case.start_time
         if case.is_timeout:
             end_time = now()
             exception_info = "TimeoutError"
         else:
             end_time = case.end_time
             exception_info = None if status == PISTAR_STATUS.PASSED else \
                 str(case.execution_exceptions[-1])
-    else:
+    except BaseException:
         status = PISTAR_STATUS.ERROR
         start_time = now()
         end_time = start_time
         exception_info = case.exception["detail"]
-    generate_report_file(case, report_info)
     generate_finish_file(
         output_dir=str(case.clazz.testcase_result_path),
         start_time=start_time,
         end_time=end_time,
         status=status,
         attach_path=str(case.clazz.logger_path),
         exception_info=exception_info
```

## _pistar/utilities/testcase/case.py

```diff
@@ -19,15 +19,14 @@
 from typing import Union
 from attr import Factory
 from attr import attrib
 from attr import attrs
 
 from _pistar.caller import ExecuteInfo
 from _pistar.config import Config
-from _pistar.logger import set_execution_log
 from _pistar.node import Node
 from _pistar.pistar_pytest.utils import now
 from _pistar.pistar_pytest.utils import sha256_slice
 from _pistar.utilities.assertion.assert_that import AssertThat
 from _pistar.utilities.condition.condition import ConditionLookUpError
 from _pistar.utilities.condition.condition import ConditionManager
 from _pistar.utilities.constants.testcase import ControlArgs
@@ -39,35 +38,46 @@
 from _pistar.utilities.exceptions.testcase import TestCaseStatusException
 from _pistar.utilities.exceptions.testcase import UnavailableException
 from _pistar.utilities.exceptions.testcase import UnexecutedException
 from _pistar.utilities.exceptions.testcase import ControlArgumentTypeException
 from _pistar.utilities.exceptions.testcase import ControlUsageException
 from _pistar.utilities.logger.logger import Logger
 from _pistar.utilities.logger.logger import ExecuteLogger
-from _pistar.utilities.messages import call_begin
-from _pistar.utilities.messages import call_failed
-from _pistar.utilities.messages import call_successfully
 from _pistar.utilities.testcase.assert_that import assert_that as _assert_that
 from _pistar.utilities.testcase.exception import ExcInfoFormatter
 from _pistar.utilities.testcase.exception import ExceptionInfo
 from _pistar.utilities.testcase.steps import has_teststep, Step
 from _pistar.utilities.testcase.steps import ParametersLookUpError
 from _pistar.utilities.testcase.steps import is_teststep
 from _pistar.utilities.testcase.steps import TimeoutLookUpError
 from _pistar.utilities.parameters.parameters import ParametersLinkLookupError
-from _pistar.utilities.constants.testcase import PISTAR_TESTCASE_EXECUTION_STATUS as PISTAR_STATUS
 from _pistar.utilities.constants.pistar_logging import LOGGING_LEVEL
 
 
 if TYPE_CHECKING:
     from _pistar.main import Session
 
 BASE_TEST_CASE = "BaseTestCase"
 
 
+def get_parent_case_from_call_stack():
+    """
+    description: this function is used to get the parent testcase from the call stack.
+    """
+    caller_frame = inspect.currentframe()
+    while True:
+        if 'self' in caller_frame.f_locals:
+            testcase = caller_frame.f_locals['self']
+            if isinstance(testcase, BaseTestCase):
+                return testcase
+        caller_frame = caller_frame.f_back
+        if caller_frame is None:
+            return None
+
+
 class MetaTestCase(type):
     """
     description: this class is the meta class of BastTestCase.
     """
 
     def __init__(cls, *args, **kwargs):
         """
@@ -84,18 +94,25 @@
 
         return new_class
 
     def __call__(cls, *args, **kwargs):
         """
         description: this function is used for testcase introspection.
         """
+        parent = get_parent_case_from_call_stack()
+        if parent:
+            cls._no_color = parent._no_color
+            cls._log_level = parent._log_level
+            cls.logger_path = parent.logger_path
+            cls.__initialize__()
+
         testcase = type.__call__(cls, *args, **kwargs)
 
-        if not testcase.failure:
 
+        if not testcase.failure:
             def failure():
                 return testcase.teardown()
 
             testcase.failure = failure
 
         return testcase
 
@@ -378,14 +395,15 @@
         )
 
         self._obj = obj
 
         self.execute_records = dict()
         self.exception = dict()
         self.execution_exceptions = list()
+        self.reports = list()
         self.__exception_instance_queue = queue.Queue()
 
         self.instance = None
         self.setup = None
         self.teardown = None
         self.failure = None
         self.is_timeout = False
@@ -540,15 +558,17 @@
             when = "teardown"
         call_info = ExecuteInfo.from_call(call=step.execute, when=when)
         report = self.hook.pistar_make_report(case=self, step=step, call_info=call_info)
         return report.exception
 
     def teststep_thread(self, step: Step):
         call_info = ExecuteInfo.from_call(step.execute, when="call")
-        report = self.hook.pistar_make_report(case=self, step=step, call_info=call_info)
+        report = self.hook.pistar_make_report(case=self, step=step,
+                                              call_info=call_info)
+        self.reports.append(report)
         self.__exception_instance_queue.put(report.exception)
 
     def _set_test_step_status(self, test_step):
         # when test case configured by '@control(rigorous=False)',let test step be
         # marked as 'end' even if it has exceptions
         if getattr(self.instance, ControlArgs.RIGOROUS, None) is False:
             test_step.end.value = True
```

## Comparing `pistar-2.4.0.dist-info/LICENSE` & `pistar-2.5.0.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `pistar-2.4.0.dist-info/METADATA` & `pistar-2.5.0.dist-info/METADATA`

 * *Files 2% similar despite different names*

```diff
@@ -1,12 +1,11 @@
 Metadata-Version: 2.1
 Name: pistar
-Version: 2.4.0
+Version: 2.5.0
 Summary: pistar: functional testing with Python
-Home-page: UNKNOWN
 License: MIT
 Keywords: test
 Platform: linux
 Platform: win32
 Classifier: Development Status :: 6 - Mature
 Classifier: Intended Audience :: Developers
 Classifier: License :: OSI Approved :: MIT License
@@ -19,24 +18,25 @@
 Classifier: Programming Language :: Python :: 3.8
 Classifier: Programming Language :: Python :: 3.9
 Classifier: Topic :: Software Development :: Testing
 Classifier: Topic :: Software Development :: Libraries
 Requires-Python: >=3.6
 Description-Content-Type: text/x-rst
 License-File: LICENSE
-Requires-Dist: colorama (==0.4.4)
-Requires-Dist: colorlog (==6.4.1)
+Requires-Dist: colorama (==0.4.6)
+Requires-Dist: colorlog (==6.7.0)
 Requires-Dist: astunparse (==1.6.3)
-Requires-Dist: Jinja2 (==3.0.1)
-Requires-Dist: attrs (==21.2.0)
+Requires-Dist: Jinja2 (==3.1.2)
+Requires-Dist: attrs (==22.1.0)
 Requires-Dist: PyYAML (==6.0)
-Requires-Dist: pytest (==6.2.5)
-Requires-Dist: pluggy (==0.13.1)
+Requires-Dist: pytest (==7.2.2)
+Requires-Dist: pluggy (==1.0.0)
 Requires-Dist: dill (==0.3.4)
-Requires-Dist: eventlet (==0.33.1)
+Requires-Dist: dnspython (==2.2.1)
+Requires-Dist: eventlet (==0.33.2)
 
 The ``pistar`` is a simple and lightweight function testing tool, using pistar testing framework can quickly
 complete the development and execution of test cases.
 
 Basic introduction
 ------------------
 Command entry::
@@ -115,9 +115,7 @@
 
 License
 -------
 
 Copyright (c) Huawei Technologies Co., Ltd. 2020-present.
 
 Distributed under the terms of the MIT license, pistar is free software.
-
-
```

## Comparing `pistar-2.4.0.dist-info/RECORD` & `pistar-2.5.0.dist-info/RECORD`

 * *Files 11% similar despite different names*

```diff
@@ -1,31 +1,31 @@
 _pistar/__init__.py,sha256=us2Bx9XUXk9u9FLc5gFKDXaBzRu7XVYn244a-XZEevU,428
-_pistar/__main__.py,sha256=PurnGvzz5jGX9Mt50Lo-OKjopdULlJcsoO_MOIUq8Kw,166
+_pistar/__main__.py,sha256=NuC89eeIdIJ7684UGlzNbqCffhG5qQfdNwXBESYfRFU,172
 _pistar/agent.py,sha256=mQhWvspNq2t0NAmV7G9DZicfHA_zjup9r4vj82cxErk,1056
 _pistar/attachment.py,sha256=KvJVwwTsynFEbN0QheWs_7NryCt9K-KEr2z-weMdIw4,3391
 _pistar/caller.py,sha256=ivlmiZFEUpUTxTxZz6dL12DNMHIomuwhIXm3mr-6QVo,2807
 _pistar/collector.py,sha256=A4_3dTLwassqloGIbCFQrRThtg6XFiVwIja2vztxNVg,4576
 _pistar/console.py,sha256=SaWEFRZCo9Juje39QMVdOBXkyewFQtmCAdeIWRmWlAI,509
 _pistar/filesystem.py,sha256=DKBlmIE-8WTJdEj4GhFlIqOTVpx1W5gM3-VJnm4X920,5221
 _pistar/ide.py,sha256=GogsID_eF1rWWNHLwEYNCvla2g3aBHw_ieqtpklLLm4,3190
-_pistar/logger.py,sha256=qoGUY4Y8fnj8WvKcArjllNCuKU4_Ji6LusqhPLSjI5U,2048
-_pistar/main.py,sha256=4ZqalGk-BvrpsdiPPzdVD4B_C_seakogGOovqpv3mNY,14136
+_pistar/logger.py,sha256=7Q-eY0C7Y-0oc6KNHWps0IJlVpMJmZiOX-0KxWzMT1E,2264
+_pistar/main.py,sha256=XTH6b5Yvz3beSZ02IRI1RL4Q3uRnnxCqxGx6O4sAqa8,14632
 _pistar/node.py,sha256=6ZdqWbTG-H9-uOQTmmHwiwxPYjIebhpyOyVGSfu6M3M,5198
-_pistar/parallel.py,sha256=Mo9FSjs_B-YpVK70K8wSSMAMV-C6Zjw5RLucZmA-Aq0,7885
-_pistar/report.py,sha256=SSGODgZ6LdPWRdumXxTFgjuqDpnsDSFT6Qj68O6fYrs,1139
-_pistar/result.py,sha256=_sdYZ4E7MZ9nEL9yDkC4StN3r_8YqdjaqD0nr8LdSTQ,4733
+_pistar/parallel.py,sha256=QgrUeoHgGYHSghTiHbYpX-FumpBSfWXztlWJcaICuZc,7867
+_pistar/report.py,sha256=csk3nXmRoYrkmOQTr5vjPX_z83PWbgkQi5vAj6oVFm4,1637
+_pistar/result.py,sha256=ULQMy8G3QXMPpq4fimBYfR6VL5ShHz5pyxdydzmCuzw,5032
 _pistar/terminal.py,sha256=o3CaOv-7YbSBpLqjqZa7ahRJ59uwv-5KZeND1RBHwuI,4034
-_pistar/config/__init__.py,sha256=K05_zRzkcMEklKNbeWmKhXw6kIU08d2urDMv0XqcXSQ,9182
+_pistar/config/__init__.py,sha256=xpX2fmufC8t8lIwvRkHIJds6vLYc9QVLI3pxeOsrDGA,9318
 _pistar/config/cmdline.py,sha256=ZpAnEUpkvnNe1yfuTEsIJPf4nzpfysPkvB_7KK5iNO4,1883
-_pistar/config/hookspec.py,sha256=nd46uCefUL0Mvkr4RXI9DYFMRTEW51sAIf95eJACKoY,2198
+_pistar/config/hookspec.py,sha256=QKPayFpie_TaYYuHa7xkywJo-DRYs7W2dH3ad6RREOs,2409
 _pistar/pistar_pytest/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-_pistar/pistar_pytest/collector.py,sha256=rSwVgecBqlTncxJk834vXXkTjG9IL_TwnW15_KvQgmE,10491
+_pistar/pistar_pytest/collector.py,sha256=SGLRHoQQpXfAMPzH8ooI3fDnhkeT9pk8PA7GplkaeK8,11048
 _pistar/pistar_pytest/models.py,sha256=VR8igv7uAnn4cltRV7-ioEbIWX6aXSxhBZu5XJyBGNY,2706
 _pistar/pistar_pytest/plugins.py,sha256=Fm01WFMYyO--Mxv6ChHU92200QJC94K5NtH_VEM65kY,599
-_pistar/pistar_pytest/reporter.py,sha256=p2JTWzsnVqwJSw0nNvi1OHKxSIXuFkItESzUOpF7hCk,3660
+_pistar/pistar_pytest/reporter.py,sha256=8-bUV0Qqmhoki_1ob7Ku4-k_PvyAoqEVDJZVFkxKU68,4247
 _pistar/pistar_pytest/utils.py,sha256=h2vnMbBVwa1OJVv96brGYMIEYoQixz_lPup8rO9YPrs,3588
 _pistar/utilities/__init__.py,sha256=1na7TyQy_tZwh_iSSBRmZ5c1Ndbz2PxrbyEuv57RV8c,823
 _pistar/utilities/action_word/__init__.py,sha256=j6GOpCYF3sWxYfTOQHWHf3nsqaNmHoYey03a_lqbgR4,61
 _pistar/utilities/action_word/checker.py,sha256=pRI9r-hCBalim9t9SQ9eELPjTnbg1LeEEb4mwDAw8Po,9428
 _pistar/utilities/action_word/decorator.py,sha256=yHKDqCj54-V34vuMjXypy-_jShvvHeIQ8hgSN7EkHaI,5686
 _pistar/utilities/argument_parser/__init__.py,sha256=6htYs5BwoD_k4VzFiVug08F3smciULuRv5iJ_iILFE0,67
 _pistar/utilities/argument_parser/argument_parser.py,sha256=riRN4lxbT_pIsQDcEa9-pcpHHJloQQrz2uaNpkr-PbM,1736
@@ -63,23 +63,23 @@
 _pistar/utilities/logger/logger.py,sha256=xsdIyjYygE3DRPZL7bd-0ewD2Ew2ME381bs67O_7ktg,2638
 _pistar/utilities/match_schema/__init__.py,sha256=lMIMMaLxDR_qTg4sIYuF0cpKVxygYgOptsAHzE2yO-M,108
 _pistar/utilities/match_schema/match_schema.py,sha256=5fbn49BknRM6G4OGBW_6-ju4BZRm4sDjeTuzF2W0ov4,7057
 _pistar/utilities/messages/__init__.py,sha256=v8268-RCHVYAa5Zezm4la226d6V6GOozl8UPf1ybPqw,813
 _pistar/utilities/parameters/__init__.py,sha256=C9kFwwVnqqAIj9sNVfXL26XUKJnM4MU6UVXP7hnD5SA,161
 _pistar/utilities/parameters/parameters.py,sha256=oCad6sNIQWaE2lu2qxMkfZzeEq--3kaPwLMafS-RHSQ,8714
 _pistar/utilities/report/__init__.py,sha256=wFC7g1C36lakykM-7uoYrCfkdjY2_DY6n22yfRSrO_E,87
-_pistar/utilities/report/pistar_report_info.py,sha256=jz5e5wQgswAtM8HKIpcFpr2W5fLQZyrmS35byV-vDrY,6743
-_pistar/utilities/report/report_factory.py,sha256=smaCe1zf2tKbwjpC78ZBQp9h5FmryWFnHzt1G6aSRCE,2322
+_pistar/utilities/report/pistar_report_info.py,sha256=nlcc5hRlxlhXZW16fEpVKa_t9Rk-gHEGLOfkyblwrvc,6762
+_pistar/utilities/report/report_factory.py,sha256=vLnMEs6l7asysZc5uEi93AYSNhldz2CBYLeCM5EM45w,1281
 _pistar/utilities/testcase/__init__.py,sha256=21ueaGtuf5iimeo0pEiDQHm002RLV3DCjEmzVK1pMI4,84
 _pistar/utilities/testcase/assert_that.py,sha256=53pnQ18YCidsKl7Ll2KENxNC1f2teA8yjWeBDu_CjMg,2043
-_pistar/utilities/testcase/case.py,sha256=fTX-KwMvaU_Ztu9y4Jnbk4ddauHrIhborzdrYHarHPU,21990
+_pistar/utilities/testcase/case.py,sha256=MkBJhzw54smecrv_UErPwP97HsDngdd9fEeVQiOxRKs,22527
 _pistar/utilities/testcase/exception.py,sha256=gx3BdJfYrA_IZ_iwHiVsINUwDIyiBTkalHf4SaJtCkQ,17312
 _pistar/utilities/testcase/repr.py,sha256=JIeJ4daUKR41r1ZGMoMSBH71ppXFNDBnyxkUPypfIUg,2186
 _pistar/utilities/testcase/steps.py,sha256=VTMXlJ3UpCquncNqT_Og2Q_nhsbJSZR0NP0mWueR1IY,14499
 _pistar/utilities/testcase/thread_status.py,sha256=oqLRGDgDw3Rw4gxZvNRDEovwUlPdgppP2jYryB0uGj8,1611
 pistar/__init__.py,sha256=ANae074l5mBiNWlLWxgL6VlyL9jej599qe5Tnx-tYpc,683
-pistar-2.4.0.dist-info/LICENSE,sha256=VJzZNM-vUsS9rXLatibgWSudp7qYqDimmTUNfB3zU-s,1105
-pistar-2.4.0.dist-info/METADATA,sha256=eqoT7fZ2uWPn9JXPn6Q5ZEEXwFCLi8LxFhvAp88NLVk,3908
-pistar-2.4.0.dist-info/WHEEL,sha256=ewwEueio1C2XeHTvT17n8dZUJgOvyCWCt0WVNLClP9o,92
-pistar-2.4.0.dist-info/entry_points.txt,sha256=vIxw5EmpaxG4HCDAqz71B6ezS_H6OhxHfA3rhCbCAi0,106
-pistar-2.4.0.dist-info/top_level.txt,sha256=_wdzMks9-rrHyId69W4hKtQB41zRXm1LGCf1dj-Vxak,15
-pistar-2.4.0.dist-info/RECORD,,
+pistar-2.5.0.dist-info/LICENSE,sha256=VJzZNM-vUsS9rXLatibgWSudp7qYqDimmTUNfB3zU-s,1105
+pistar-2.5.0.dist-info/METADATA,sha256=P0ovYQbghor2UeHvaIz34pt27xRH7Nld83JNJmD8ddU,3921
+pistar-2.5.0.dist-info/WHEEL,sha256=ewwEueio1C2XeHTvT17n8dZUJgOvyCWCt0WVNLClP9o,92
+pistar-2.5.0.dist-info/entry_points.txt,sha256=YI0wrsRAVwOgjZhIcdBS_4ooCAxkgpyBxbWAMlArdYY,105
+pistar-2.5.0.dist-info/top_level.txt,sha256=_wdzMks9-rrHyId69W4hKtQB41zRXm1LGCf1dj-Vxak,15
+pistar-2.5.0.dist-info/RECORD,,
```

